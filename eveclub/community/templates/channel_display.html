{% extends 'channel_base.html' %}

{% block title %}{{channel.name}}{% endblock %}

{% block more_content %}
<div id="topic_list">
<table width="100%">
<tr class="topic_list_header">
  <td width="6%">状态</td>
  <td>标题</td>
  <td width="14%">作者</td>
  <td width="14%">最后回复</td>
  <td width="7%">点击数</td>
  <td width="7%">回复数</td>
</tr>
{% for t in topics %}
<tr class="{% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
  <td>{% if t.is_sticky %}置顶{% endif %}{% if t.is_essence %}<br />精华{t.essence_level}{% endif %}</td>
  <td class="topic_list_title"><a href="/topic/{{ t.id }}">{{ t.title }}</a><br /><span style="color: #777">{{ t.shortcontent | slice:":36"}}</span></td>
  <td><a href='/pilot/{{ t.create_author.id }}/'>{{ t.create_author }}</a><br />{{ t.create_time | date:"Y-m-d H:i"}}</td>
  <td><a href='/pilot/{{ t.update_author.id }}/'>{{ t.update_author }}</a><br />{{ t.update_time | date:"Y-m-d H:i"}}</td>
  <td>{{ t.clicks }}</td>
  <td>{{ t.replies }}</td>
</tr>
{% endfor %}

</table>
</div>

{% if user.is_authenticated %}
<div class="user_action">
  <p><a href="#" class="btn" onclick="$('#reply_form').show(); return false;">我要发帖</a></p>
</div>
<div id="reply_form" class="row">
  <div class="span8">
  <form action="/community/topic/new/" method="post">{% csrf_token %}
    <input type="hidden" name="channel_id" value="{{ channel.id }}" />
    <input type="hidden" name="topic_type" value="normal" />
    <p><label>标题：</label><input type="text" name="title" class="topic_title_input" /></p>
    <p><label>内容：</label><textarea id="editor" name="content" class="reply_textarea"></textarea></p>
    <p><input type="submit" value="发布" class="btn" /> <a href="#" class="btn" onclick="$('#reply_form').hide(); return false;">算了不说了</a></p>
  </form>
  </div>
  <div class="span4">
    <div id="emotion_selector">
      表情选择
      <div class="btn-group">
        <button class="btn" onclick="showEmotionPage(1)">1</button>
        <button class="btn" onclick="showEmotionPage(2)">2</button>
        <button class="btn" onclick="showEmotionPage(3)">3</button>
      </div>
      <div id="page1" class="emotion_selector_page">
        <img src="/static/img/em/ac01.gif" onclick="insertEmotion('ac01')" />
        <img src="/static/img/em/ac02.gif" onclick="insertEmotion('ac02')" />
        <img src="/static/img/em/ac03.gif" onclick="insertEmotion('ac03')" />
        <img src="/static/img/em/ac04.gif" onclick="insertEmotion('ac04')" />
        <img src="/static/img/em/ac05.gif" onclick="insertEmotion('ac05')" />
        <img src="/static/img/em/ac06.gif" onclick="insertEmotion('ac06')" />
        <img src="/static/img/em/ac07.gif" onclick="insertEmotion('ac07')" />
        <img src="/static/img/em/ac08.gif" onclick="insertEmotion('ac08')" />
        <img src="/static/img/em/ac09.gif" onclick="insertEmotion('ac09')" />
        <img src="/static/img/em/ac10.gif" onclick="insertEmotion('ac10')" />
        <img src="/static/img/em/ac11.gif" onclick="insertEmotion('ac11')" />
        <img src="/static/img/em/ac12.gif" onclick="insertEmotion('ac12')" />
        <img src="/static/img/em/ac13.gif" onclick="insertEmotion('ac13')" />
        <img src="/static/img/em/ac14.gif" onclick="insertEmotion('ac14')" />
        <img src="/static/img/em/ac15.gif" onclick="insertEmotion('ac15')" />
        <img src="/static/img/em/ac16.gif" onclick="insertEmotion('ac16')" />
        <img src="/static/img/em/ac17.gif" onclick="insertEmotion('ac17')" />
        <img src="/static/img/em/ac18.gif" onclick="insertEmotion('ac18')" />
        <img src="/static/img/em/ac19.gif" onclick="insertEmotion('ac19')" />
        <img src="/static/img/em/ac20.gif" onclick="insertEmotion('ac20')" />
        <img src="/static/img/em/ac21.gif" onclick="insertEmotion('ac21')" />
        <img src="/static/img/em/ac22.gif" onclick="insertEmotion('ac22')" />
        <img src="/static/img/em/ac23.gif" onclick="insertEmotion('ac23')" />
        <img src="/static/img/em/ac24.gif" onclick="insertEmotion('ac24')" />
        <img src="/static/img/em/ac25.gif" onclick="insertEmotion('ac25')" />
      </div>
      <div id="page2" class="emotion_selector_page">
        <img src="/static/img/em/ac26.gif" onclick="insertEmotion('ac26')" />
        <img src="/static/img/em/ac27.gif" onclick="insertEmotion('ac27')" />
        <img src="/static/img/em/ac28.gif" onclick="insertEmotion('ac28')" />
        <img src="/static/img/em/ac29.gif" onclick="insertEmotion('ac29')" />
        <img src="/static/img/em/ac30.gif" onclick="insertEmotion('ac30')" />
        <img src="/static/img/em/ac31.gif" onclick="insertEmotion('ac31')" />
        <img src="/static/img/em/ac32.gif" onclick="insertEmotion('ac32')" />
        <img src="/static/img/em/ac33.gif" onclick="insertEmotion('ac33')" />
        <img src="/static/img/em/ac34.gif" onclick="insertEmotion('ac34')" />
        <img src="/static/img/em/ac35.gif" onclick="insertEmotion('ac35')" />
        <img src="/static/img/em/ac36.gif" onclick="insertEmotion('ac36')" />
        <img src="/static/img/em/ac37.gif" onclick="insertEmotion('ac37')" />
        <img src="/static/img/em/ac38.gif" onclick="insertEmotion('ac38')" />
        <img src="/static/img/em/ac39.gif" onclick="insertEmotion('ac39')" />
        <img src="/static/img/em/ac40.gif" onclick="insertEmotion('ac40')" />
        <img src="/static/img/em/ac41.gif" onclick="insertEmotion('ac41')" />
        <img src="/static/img/em/ac42.gif" onclick="insertEmotion('ac42')" />
        <img src="/static/img/em/ac43.gif" onclick="insertEmotion('ac43')" />
        <img src="/static/img/em/ac44.gif" onclick="insertEmotion('ac44')" />
        <img src="/static/img/em/ac45.gif" onclick="insertEmotion('ac45')" />
        <img src="/static/img/em/ac46.gif" onclick="insertEmotion('ac46')" />
        <img src="/static/img/em/ac47.gif" onclick="insertEmotion('ac47')" />
        <img src="/static/img/em/ac48.gif" onclick="insertEmotion('ac48')" />
        <img src="/static/img/em/ac49.gif" onclick="insertEmotion('ac49')" />
        <img src="/static/img/em/ac50.gif" onclick="insertEmotion('ac50')" />
      </div>
      <div id="page3" class="emotion_selector_page">
        <img src="/static/img/em/ac51.gif" onclick="insertEmotion('ac51')" />
        <img src="/static/img/em/ac52.gif" onclick="insertEmotion('ac52')" />
        <img src="/static/img/em/ac53.gif" onclick="insertEmotion('ac53')" />
        <img src="/static/img/em/ac54.gif" onclick="insertEmotion('ac54')" />
      </div>
    </div>
    <script src="{{ STATIC_URL }}js/editor.js"></script>
  </div>
</div>
{% endif %}
{% endblock %}